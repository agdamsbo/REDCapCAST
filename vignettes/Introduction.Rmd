---
title: "Introduction"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(REDCapCAST)
```

This vignette covers the included functions and basic functionality.

A dataset and a meta data file are provided with the package for demonstration of the functions.

## Splitting the dataset

```{r}
redcapcast_data |> gt::gt()
```

```{r}
redcapcast_meta |> gt::gt()
```
```{r}
list <-
  REDCapCAST::REDCap_split(records = redcapcast_data,
                           metadata = redcapcast_meta,
                           forms = "repeating")
str(list)
```

```{r}
list <-
  REDCapCAST::REDCap_split(records = redcapcast_data,
                           metadata = redcapcast_meta,
                           forms = "all")
str(list)
```

## Reading data from REDCap

This function wraps all the above demonstrated function to get the dataset, the metadata, apply the `REDCap_split`function and then a bit of cleaning.

The function works very similar to the `REDCapR::redcap_read()`.

```{r eval=FALSE}
# read_redcap_tables(uri = "YOUR URI", token = "YOUR TOKEN")

# ds <- read_redcap_tables(uri = key_get("DB_URI"), token = key_get("cast_api"))
```

## Pivotting to wider format

```{r}
# redcap_wider(ds)
```


